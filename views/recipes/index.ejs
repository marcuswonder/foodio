<%- include('../partials/header') %>

<h1>Recipes</h1>
<% if (recipes.length === 0) { %>

  <p>There are no recipes here!</p>

<% } else { %>
  <table id="recipes-list">
  <thead>
    <tr>
      <th>Recipe</th>
      <th>Author</th>
      <th>Category</th>
      <th>Delete</th>
    </tr>
  </thead>
    <tbody>
      <% recipes.forEach(function(r) { %>
      <tr>
        <td><a href="/recipes/<%= r._id %>"><%= r.name %></a></td>
        <td><%= r.userName %></td>
        <td><%= r.category %></td>
        <td>
          <% if (user?._id.equals(r.author)) { %>
            <form action="/recipes/<%= r._id %>?_method=DELETE" method="POST" class="delete">
              <button type="submit">X</button>
            </form>
          <% } %>
        </td>
      </tr>
      <% }); %>
    </tbody>
  </table>
  <% } %>
  <form id="add-recipe-page-link" method="GET" 
  action="recipes/add"><input type="submit" value="Add Recipe"/>
</form>

<%- include('../partials/footer') %>